<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Run command dialog">
		<meta name="author" content="max1220">
		<title>ðŸ–» X11 Stream</title>
		<link rel="stylesheet" href="/static/css/xp/style.css">
		<link rel="stylesheet" href="/static/css/xp/application.css">
		<style>
			:root {
				--windows-content-padding: 0px;
			}
			#settings {
				padding: 5px;
			}
			#screen_img {
				position: absolute;
				left: 0;
				right: 0;
				top: 0;
				bottom: 0;
			}
			.field-row input {
				width: 75px;
			}
			.field-row input[type=checkbox] {
				width: auto;
			}
		</style>
	</head>
	<body onload="window_onload('screen_img')">
		<div class="window-content">
			<div id="stream">
				<img id="screen_img" class="hidden"></img>
			</div>
			<div id="settings">
				<h2>X11 Stream</h2>
				<p>
					This application streams the content of an X11 display using ffmpeg
					and sends mouse inputs using xdotool.<br>
				</p>
				<h3>Settings</h3>
				<p>
					You can create and connect a new session with a new Xvfb server,<br>
					create and connect a new session from an existing X11 display or<br>
					connect to an existing session with a session ID.<br>
					The capture settings apply to all connection options.
				</p>
				<section class="tabs">
					<menu role="tablist" aria-label="Settings Tabs">
						<button role="tab" aria-controls="tab-xvfb" aria-selected="true">Xvfb</button>
						<button role="tab" aria-controls="tab-mirror">Mirror</button>
						<button role="tab" aria-controls="tab-session">Session</button>
						<button role="tab" aria-controls="tab-capture">Capture</button>
					</menu>
					<article role="tabpanel" id="tab-xvfb">
						<h3>Create new Xvfb session</h3>
						<div class="field-row">
							<label for="session_create_command">Command:</label>
							<input type="text" id="session_create_command" data-update-key="session_create_command" data-update-type="input-text" data-update-onchange value="xterm">
						</div>
						<div class="field-row">
							<label for="session_create_width">Initial width:</label>
							<input type="number" id="session_create_width" data-update-key="session_create_width" data-update-type="input-integer" data-update-onchange value="1920" min="320" max="3840">
						</div>
						<div class="field-row">
							<label for="session_create_height">Initial height:</label>
							<input type="number" id="session_create_height" data-update-key="session_create_height" data-update-type="input-integer" data-update-onchange value="1080" min="240" max="2160">
						</div>
						<div class="field-row">
							<label for="session_create_wm">Window manager:</label>
							<input type="text" id="session_create_wm" data-update-key="session_create_wm" data-update-type="input-text" data-update-onchange value="matchbox-window-manager">
						</div>
						<div class="field-row">
							<span></span>
							<button class="btn" onclick="btn_create_session_xvfb()">Create</button>
						</div>
					</article>
					<article role="tabpanel" id="tab-mirror">
						<h3>Create new mirror session</h3>
						<div class="field-row">
							<label for="session_create_mirror_display">Display:</label>
							<input type="text" id="session_create_mirror_display" data-update-key="session_create_mirror_display" data-update-type="input-text" data-update-onchange value=":0">
						</div>
						<div class="field-row">
							<span></span>
							<button class="btn" onclick="btn_create_session_mirror()">Mirror</button>
						</div>
					</article>
					<article role="tabpanel" id="tab-session">
						<h3>Connect to existing session</h3>
						<div class="field-row">
							<label for="session_id">Session ID:</label>
							<input type="text" id="session_id" data-update-key="session_id" data-update-type="input-text" data-update-onchange value="">
						</div>
						<div class="field-row">
							<span></span>
							<button class="btn" onclick="btn_connect_session()">Connect</button>
						</div>
					</article>
					<article role="tabpanel" id="tab-capture">
						<h3>Capture settings</h3>
						<div class="field-row">
							<label for="view_width">View width:</label>
							<input type="text" id="view_width" data-update-key="view_width" data-update-type="input-integer" data-update-onchange value="640" min="320" max="3840">
						</div>
						<div class="field-row">
							<label for="view_height">View height:</label>
							<input type="text" id="view_height" data-update-key="view_height" data-update-type="input-integer" data-update-onchange value="480" min="240" max="2160">
						</div>
						<div class="field-row">
							<label for="view_offset_x">View offset x:</label>
							<input type="text" id="view_offset_x" data-update-key="view_offset_x" data-update-type="input-integer" data-update-onchange value="0" min="0" max="3840">
						</div>
						<div class="field-row">
							<label for="view_offset_y">View offset y:</label>
							<input type="text" id="view_offset_y" data-update-key="view_offset_y" data-update-type="input-integer" data-update-onchange value="0" min="0" max="2160">
						</div>
						<div class="field-row">
							<label for="encode_framerate">Framerate:</label>
							<input type="text" id="encode_framerate" data-update-key="encode_framerate" data-update-type="input-integer" data-update-onchange value="25" min="1" max="60">
						</div>
						<div class="field-row">
							<label for="encode_quality">Quality:</label>
							<input type="text" id="encode_quality" data-update-key="encode_quality" data-update-type="input-integer" data-update-onchange value="5" min="1" max="32">
						</div>
						<div class="field-row">
							<label for="encode_low_delay">Low delay:</label>
							<input type="checkbox" id="encode_low_delay" data-update-key="encode_low_delay" data-update-type="input-boolean" data-update-onchange>
						</div>
						<div class="field-row">
							<label for="input_keyboard_enable">Enable keyboard:</label>
							<input type="checkbox" id="input_keyboard_enable" data-update-key="input_keyboard_enable" data-update-type="input-boolean" data-update-onchange checked>
						</div>
						<div class="field-row">
							<label for="input_mouse_enable">Enable mouse:</label>
							<input type="checkbox" id="input_mouse_enable" data-update-key="input_mouse_enable" data-update-type="input-boolean" data-update-onchange checked>
						</div>
						<div class="field-row">
							<label for="input_mouse_capture">Capture mouse:</label>
							<input type="checkbox" id="input_mouse_capture" data-update-key="input_mouse_capture" data-update-type="input-boolean" data-update-onchange>
						</div>
						<div class="field-row">
							<label for="auto_resize_view_enable">Auto-resize view:</label>
							<input type="checkbox" id="auto_resize_view_enable" data-update-key="auto_resize_view_enable" data-update-type="input-boolean" data-update-onchange checked>
						</div>
						<div class="field-row">
							<label for="auto_resize_server_enable">Auto-resize server:</label>
							<input type="checkbox" id="auto_resize_server_enable" data-update-key="auto_resize_server_enable" data-update-type="input-boolean" data-update-onchange checked>
						</div>
					</article>
				</section>
			</div>
		</div>

		<script src="/static/js/fix_radio_onchange.js"></script>
		<script>add_onchange_radio_dispatch_others()</script>
		<script src="/static/js/make_xhr.js"></script>
		<script src="/static/js/CgiCommands.js"></script>
		<script src="/static/js/AppState.js"></script>
		<script src="/static/js/cvt.js"></script>
		<script src="/static/js/X11Streamer.js"></script>
		<script src="/static/js/xp/tabs.js"></script>
		<script src="/static/js/xp/x11_stream.js"></script>
	</body>
<!--
These values are read outside of the iframe
to determine the prefered size of this window:
{{{window_width=800}}}
{{{window_height=600}}}
{{{window_resizeable}}}
-->
</html>





